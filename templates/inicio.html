{% extends 'base.html' %}
{% load static %}

{% block extra_css %}
  <link rel="stylesheet" href="{% static 'css/pages/inicio.css' %}">
{% endblock %}

{% block content %}

    <div class="seccion-principal">
        <div class="componente-principal">
            
            <div class="contenedor-imagen">
                <img class="imagen-principal" 
                     src="{% if hero_config.imagen_fondo %}{{ hero_config.imagen_fondo.url }}{% else %}{% static 'images/imagen1.jpg' %}{% endif %}" 
                     alt="Viandas saludables en una mesa">
            </div>

            <div class="contenedor-contenido">
                <p class="titulo">
                    {{ hero_config.titulo_principal|default:"Te ayudamos a lograr tus objetivos, <br> sin perder el placer de comer."|safe }}
                </p>
                <p class="descripcion">
                    {{ hero_config.descripcion|default:"Te ofrecemos viandas nutritivas y asesoramiento profesional para que alimentarte bien sea simple, rico y sostenible en el tiempo."|linebreaksbr }}
                </p>
                <div class="contenedor-botones">
                    <a href="{{ hero_config.url_boton_1|default:"#" }}" class="btn-elegante">{{ hero_config.texto_boton_1|default:"Viandas" }}</a>
                    <a href="{{ hero_config.url_boton_2|default:"#" }}" class="btn-elegante">{{ hero_config.texto_boton_2|default:"Consultas" }}</a>
                </div>
            </div>
        </div>
    </div>
    {% if imagenes_carrusel %}
    <section class="carrusel-seccion">
        <div class="carrusel-container" id="mi-carrusel">
            <div class="carrusel-inner">
                {% for item in imagenes_carrusel %}
                <div class="carrusel-item {% if forloop.first %}active{% endif %}">
                    {% if item.link_url %}
                        <a href="{{ item.link_url }}" {% if item.abrir_en_nueva_pestana %}target="_blank"{% endif %}>
                            <img src="{{ item.imagen.url }}" alt="{{ item.titulo|default:'Slide' }}">
                        </a>
                    {% else %}
                        <img src="{{ item.imagen.url }}" alt="{{ item.titulo|default:'Slide' }}">
                    {% endif %}
                    {% if item.titulo %}
                        <div class="carrusel-caption">{{ item.titulo }}</div>
                    {% endif %}
                </div>
                {% endfor %}
            </div>
            <button class="carrusel-control prev" data-slide="prev">&#10094;</button>
            <button class="carrusel-control next" data-slide="next">&#10095;</button>
            <div class="carrusel-indicators">
                {% for item in imagenes_carrusel %}
                <span class="indicator-dot {% if forloop.first %}active{% endif %}" data-slide-to="{{ forloop.counter0 }}"></span>
                {% endfor %}
            </div>
        </div>
    </section>
    {% endif %}
    <section class="seccion-productos">
        <h2 class="titulo-seccion">Nuestras Viandas Destacadas</h2>
        <div class="contenedor-grid-productos">
            {% for producto in productos %}
            
                {% comment %} 
                  Aquí comprobamos la variable que viene del admin.
                {% endcomment %}
                
                {% if apariencia_config.estilo_tarjeta_producto == 'hot_sale' %}
                    
                    {% include 'productos/partials/card_hot_sale.html' %}
                
              {% elif apariencia_config.estilo_tarjeta_producto == 'harvest' %}

    {% comment %} Carga la nueva tarjeta Harvest {% endcomment %}
    {% include 'productos/partials/card_harvest.html' %}


                    
                    
                
                {% else %}
                    
                    {% comment %} Este es el 'simple' (default) {% endcomment %}
                    {% include 'productos/partials/card_simple.html' %}
                
                {% endif %}
                
                {% endfor %}
        </div>
    </section>

    {% if receta %}
    <section class="seccion-receta">
        <div id="receta-card" class="receta-card">
            <div class="receta-imagen-contenedor">
                <img id="receta-imagen" src="{{ receta.imagen.url }}" alt="{{ receta.nombre }}">
            </div>
            <div class="receta-contenido">
                <h3 class="subtitulo-seccion">¿Sin ideas para hoy?</h3>
                <h2 id="receta-nombre" class="titulo-receta">{{ receta.nombre }}</h2>
                <div id="receta-detalles" class="receta-detalles">
                    <h4><i class="fas fa-clock"></i> Tiempo: <span id="receta-tiempo">{{ receta.tiempo_preparacion }}</span></h4>
                    <h4><i class="fas fa-list-ul"></i> Ingredientes:</h4>
                    <p id="receta-ingredientes">{{ receta.ingredientes }}</p>
                    <h4><i class="fas fa-utensils"></i> Pasos:</h4>
                    <p id="receta-instrucciones">{{ receta.instrucciones }}</p>
                </div>
                <div class="receta-botones">
                    <button id="ver-receta-btn" class="btn-principal" type="button">Ver Receta Completa</button>
                    <button id="otra-receta-btn" class="btn-secundario" type="button">Probar otra</button>
                </div>
            </div>
        </div>
    </section>
    {% endif %}

{% endblock %}