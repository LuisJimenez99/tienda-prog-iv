{% extends 'base.html' %}
{% load static %}

{% block extra_css %}
  <link rel="stylesheet" href="{% static 'css/pages/inicio.css' %}">
{% endblock %}

{% block content %}

    <div class="seccion-principal">
        <div class="componente-principal">
            
            <div class="contenedor-imagen">
                <img class="imagen-principal" 
     src="{% if hero_config.imagen_fondo %}{{ hero_config.imagen_fondo.url }}{% else %}{% static 'images/imagen1.jpg' %}{% endif %}" 
     alt="...">
            </div>

            <div class="contenedor-contenido">
                <p class="titulo">
                    {{ hero_config.titulo_principal|default:"Te ayudamos a lograr tus objetivos, <br> sin perder el placer de comer."|safe }}
                </p>
                <p class="descripcion">
                    {{ hero_config.descripcion|default:"Te ofrecemos viandas nutritivas y asesoramiento profesional para que alimentarte bien sea simple, rico y sostenible en el tiempo."|linebreaksbr }}
                </p>
                <div class="contenedor-botones">
                    <a href="{{ hero_config.url_boton_1|default:"#" }}" class="btn-elegante">{{ hero_config.texto_boton_1|default:"Viandas" }}</a>
                    <a href="{{ hero_config.url_boton_2|default:"#" }}" class="btn-elegante">{{ hero_config.texto_boton_2|default:"Consultas" }}</a>
                </div>
            </div>
        </div>
    </div>
    
    {% if imagenes_carrusel %}
    <section class="carrusel-seccion">
        <div class="carrusel-container" id="mi-carrusel">
            <div class="carrusel-inner">
                {% for item in imagenes_carrusel %}
<div class="carrusel-item {% if forloop.first %}active{% endif %}">
    {% if item.link_url %}
        <a href="{{ item.link_url }}" {% if item.abrir_en_nueva_pestana %}target="_blank"{% endif %}>
            {% if item.imagen %}
                <img src="{{ item.imagen.url }}" alt="{{ item.titulo|default:'Slide' }}">
            {% endif %}
        </a>
    {% else %}
        {% if item.imagen %}
            <img src="{{ item.imagen.url }}" alt="{{ item.titulo|default:'Slide' }}">
        {% endif %}
    {% endif %}
    
</div>
{% endfor %}
            </div>
            <button class="carrusel-control prev" data-slide="prev">&#10094;</button>
            <button class="carrusel-control next" data-slide="next">&#10095;</button>
            <div class="carrusel-indicators">
                {% for item in imagenes_carrusel %}
                <span class="indicator-dot {% if forloop.first %}active{% endif %}" data-slide-to="{{ forloop.counter0 }}"></span>
                {% endfor %}
            </div>
        </div>
    </section>
    {% endif %}
    
    <section class="seccion-productos">
        <h2 class="titulo-seccion">Nuestras Viandas Destacadas</h2>
        <div class="contenedor-grid-productos">
            {% for producto in productos %}
            
                {% comment %} 
                  Lógica de tarjetas (¡CORREGIDA!)
                {% endcomment %}
                
                {% if apariencia_config.estilo_tarjeta_producto == 'hot_sale' %}
                    
                    {% include 'productos/partials/card_hot_sale.html' %}
                
                {% elif apariencia_config.estilo_tarjeta_producto == 'harvest' %}

                    {% comment %} Carga la nueva tarjeta Harvest {% endcomment %}
                    {% include 'productos/partials/card_harvest.html' %}
                
                {% else %} {% comment %} Este es el 'simple' (default) {% endcomment %}
                    {% include 'productos/partials/card_simple.html' %}
                
                {% endif %} {% endfor %}
        </div>
    </section>

    

{% endblock %}