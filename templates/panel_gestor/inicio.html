{% extends 'panel_gestor/base_panel.html' %}

{% block title %}Hola, {{ user.first_name|default:"Admin" }} 游녦{% endblock %}

{% block extra_css %}
<style>
    /* Banner de Bienvenida (Verde Gradiente) */
    .welcome-banner {
        background: linear-gradient(135deg, #92c090 0%, #2e4a2c 100%);
        color: white;
        padding: 30px;
        border-radius: 16px;
        margin-bottom: 30px;
        box-shadow: 0 10px 20px rgba(74, 108, 72, 0.2);
    }
    .welcome-banner h2 { 
        margin: 0 0 5px 0; 
        font-size: 1.5rem; 
        font-weight: 700;
    }
    .welcome-banner p { 
        margin: 0; 
        opacity: 0.9; 
        font-size: 0.95rem;
    }

    /* Grilla de Tarjetas KPI */
    .stats-grid {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
        gap: 20px;
        margin-bottom: 30px;
    }

    /* Tarjetas como Links */
    .stat-card {
        background: white;
        padding: 25px;
        border-radius: 16px;
        box-shadow: 0 2px 10px rgba(0,0,0,0.03);
        border: 1px solid #f1f5f9;
        display: flex;
        justify-content: space-between;
        align-items: center;
        transition: transform 0.2s, box-shadow 0.2s;
        text-decoration: none; /* Quitamos subrayado */
        color: inherit;
        cursor: pointer;
    }
    .stat-card:hover {
        transform: translateY(-5px);
        box-shadow: 0 10px 20px rgba(0,0,0,0.05);
    }

    .stat-info h3 { 
        margin: 0; 
        font-size: 2.2rem; 
        font-weight: 700; 
        color: #1e293b; 
    }
    .stat-info p { 
        margin: 5px 0 0; 
        color: #64748b; 
        font-size: 0.85rem; 
        font-weight: 600; 
        text-transform: uppercase; 
        letter-spacing: 0.5px; 
    }

    .stat-icon {
        width: 60px; 
        height: 60px;
        border-radius: 12px;
        display: flex; 
        align-items: center; 
        justify-content: center;
        font-size: 1.8rem;
    }

    /* Colores Espec칤ficos por Tarjeta */
    .icon-turnos { background: #e0f2fe; color: #0284c7; } /* Azul */
    .icon-cocina { background: #fef3c7; color: #d97706; } /* Amarillo */
    .icon-envios { background: #dcfce7; color: #16a34a; } /* Verde */

    /* Secci칩n Acciones R치pidas */
    .actions-grid { 
        display: grid; 
        grid-template-columns: repeat(auto-fill, minmax(180px, 1fr)); 
        gap: 15px; 
    }
    
    .action-btn {
        background: white; 
        border: 1px dashed #cbd5e1;
        border-radius: 12px; 
        padding: 20px; 
        text-align: center;
        color: #475569; 
        text-decoration: none; 
        font-weight: 600;
        transition: all 0.2s; 
        display: flex; 
        flex-direction: column; 
        align-items: center; 
        gap: 10px;
        font-size: 0.9rem;
    }
    
    .action-btn i { 
        font-size: 1.5rem; 
        color: #94a3b8; 
        transition: color 0.2s;
    }
    
    .action-btn:hover { 
        border-color: var(--brand-color); 
        color: var(--brand-color); 
        background: #f8fafc; 
        transform: scale(1.02);
    }
    .action-btn:hover i { 
        color: var(--brand-color); 
    }

</style>
{% endblock %}

{% block panel_content %}

    <!-- 1. Banner de Bienvenida -->
    <div class="welcome-banner">
        <h2>Resumen del d칤a: {{ fecha_actual|date:"l d \d\e F"|capfirst }}</h2>
        <p>Aqu칤 tienes un vistazo r치pido de lo que necesitas atender hoy para mantener el negocio funcionando.</p>
    </div>

    <!-- 2. Tarjetas de Estad칤sticas (LINKS FUNCIONALES) -->
    <div class="stats-grid">
        
        <!-- Tarjeta: Turnos Hoy -> Link a Agenda -->
        <a href="{% url 'panel_agenda' %}" class="stat-card">
            <div class="stat-info">
                <h3>{{ turnos_hoy }}</h3>
                <p>Turnos Hoy</p>
            </div>
            <div class="stat-icon icon-turnos">
                <i class="far fa-calendar-alt"></i>
            </div>
        </a>

        <!-- Tarjeta: Cocina -> Link a Cocina (Filtrado por pagado) -->
        <a href="{% url 'panel_cocina' %}?estado=pagado" class="stat-card">
            <div class="stat-info">
                <h3>{{ pedidos_cocina }}</h3>
                <p>Pedidos a Cocinar</p>
            </div>
            <div class="stat-icon icon-cocina">
                <i class="fas fa-utensils"></i>
            </div>
        </a>

        <!-- Tarjeta: Env칤os -> Link a Env칤os -->
        <a href="{% url 'panel_envios' %}" class="stat-card">
            <div class="stat-info">
                <!-- Puedes conectar esto a la vista real si lo deseas -->
                <h3>Ver</h3> 
                <p>Env칤os Pendientes</p>
            </div>
            <div class="stat-icon icon-envios">
                <i class="fas fa-truck"></i>
            </div>
        </a>
    </div>

    <!-- 3. Acciones R치pidas (CONECTADAS) -->
    <h3 style="color: #334155; margin-bottom: 15px; font-size: 1.1rem;">Acciones R치pidas</h3>
    
    <div class="actions-grid">
        <!-- Nuevo Turno: Lleva a la agenda -->
        <a href="{% url 'panel_agenda' %}" class="action-btn">
            <i class="fas fa-plus-circle"></i>
            Nuevo Turno
        </a>
        
        <!-- Exportar: Descarga el Excel -->
        <a href="{% url 'exportar_comanda' %}" class="action-btn">
            <i class="fas fa-file-export"></i>
            Exportar Comanda
        </a>
        
        <!-- Nuevo Paciente: AHORA APUNTA AL NUEVO FORMULARIO -->
        <a href="{% url 'panel_paciente_nuevo' %}" class="action-btn">
            <i class="fas fa-user-plus"></i>
            Nuevo Paciente
        </a>
        
        <!-- Ver Inventario: Link al Panel de Inventario (o Admin si prefieres) -->
        <a href="{% url 'panel_inventario' %}" class="action-btn">
            <i class="fas fa-clipboard-list"></i>
            Ver Inventario
        </a>
    </div>

{% endblock %}